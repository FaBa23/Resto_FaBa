(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7499],{91467:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gofood-pas",function(){return a(44070)}])},84448:function(e,t,a){"use strict";var l=a(59658);a(46012);var r=a(84824),i=a(46117),n=a(443),s=a(29469),o=a(28802);t.Z=e=>{var t,a,d,c,u;let{err:m}=e,{t:h}=(0,s.Z)("pas-promo"),f=(null==m?void 0:null===(t=m.error)||void 0===t?void 0:t.message_title)&&(null==m?void 0:null===(a=m.error)||void 0===a?void 0:a.illustration),p=h("error_title"),_=h("error_description"),g=i.Z;return f&&(p=(null==m?void 0:null===(d=m.error)||void 0===d?void 0:d.message_title)||h("error_title"),_=(null==m?void 0:null===(c=m.error)||void 0===c?void 0:c.message)||"",g=(null==m?void 0:null===(u=m.error)||void 0===u?void 0:u.illustration)==="food_spot_hero_merchant_reporting"?r.Z:i.Z),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"mx-auto w-[calc(100%_-_48px)] md:w-[360px] py-2 md:py-20 min-h-[calc(100vh_-_273px)]",children:(0,l.jsxs)("div",{className:"flex flex-col w-full items-center mb-16",children:[(0,l.jsx)(g,{className:"w-[360px] my-3"}),(0,l.jsx)("h3",{className:"gf-heading-xl md:gf-heading-xl mb-1 text-center",children:p}),(0,l.jsx)("div",{className:"gf-body-m md:gf-body-l text-gf-content-secondary text-center",children:_}),(0,l.jsx)(n.default,{buttonSize:"l",as:o.r,href:"/",variant:"primary",color:"brand",className:"w-full mt-4",children:h("error_cta")})]})})})}},44070:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return ec},default:function(){return eu}});var l=a(59658),r=a(46012),i=a(4036),n=a(14296),s=a(94769),o=a(21777),d=a(27111),c=a(12769),u=a(57971),m=a(24719),h=a(58460),f=a(7234),p=a(45966),_=a(14796),g=a(21179),x=a(27749),v=a(96280),w=a(22794),y=a(64699),b=a(12154),j=a(18397),C=a(56632),N=a(24375),k=a(42562),Z=a(66497),P=a.n(Z),R=a(29469),S=a(950),E=a(40060),I=a(28802),M=a(64e3),T=a(41408),F=a(69656),q=a(47657),L=a(86690),A=a(86309),O=a(35857),U=a(32020),D=a(10220),V=a(97411),B=a(50636),H=a(42041),K=a(71955),X=a(68841),z=()=>{let e=(0,H.Z)(),{getHeaders:t}=(0,B.n)(),a=(0,V.Dj)(),l=(0,r.useMemo)(()=>(null==a?void 0:a.chosenLocation)||(0,D.xi)(e.countryCode),[a,e.countryCode]),i=(0,r.useCallback)(async e=>await K.Z.get("/api/items",{params:e,headers:{...t(),[X.ls]:l.timezone||"Asia/Jakarta",[X.lv]:l.serviceAreaId||"1",[X.Z9]:"".concat(l.latitude,",").concat(l.longitude)}}),[t]);return{itemsApi:(0,U.useMutation)(e=>i(e),{retry:!1})}},G=a(53335);let Y=(0,r.createContext)({}),$=e=>{let{children:t,paymentMethodsConfig:a}=e,n=(0,i.useRouter)(),{selectedFilterChoices:s,setSelectedFilterChoices:o,refinersToBeUpdated:d,setRefinersToBeUpdated:c,removeSectionChoices:u,toggleSingleChoice:m,selectSingleChoice:h,toggleChoice:f,selectedChoiceKeys:p}=(0,G.Z)({defaultRefinersToBeUpdated:!1}),[_,g]=(0,r.useState)(),[x,v]=(0,r.useState)([]),[w,y]=(0,r.useState)(""),[b,j]=(0,r.useState)(""),{itemsApi:C}=z(),{mutateAsync:N,error:k,data:Z,isLoading:P}=C,R=(0,r.useCallback)(async()=>{let e={...(0,O.RY)((null==_?void 0:_.url)||""),...(0,O.is)(s)},t={...n.query,...e.label&&{label:e.label},...s.length&&{url_part:s.map(e=>e.url_part).join(",")}};0===s.length&&t.hasOwnProperty("url_part")&&delete t.url_part,!e.label&&t.hasOwnProperty("label")&&delete t.label,t.hasOwnProperty("page")&&delete t.page,await n.push({query:t},void 0,{shallow:!0}),N({...e,allowed_payment_types:(null==a?void 0:a.allowedPaymentMethods.join(","))||""})},[s,_,N,n,a]),S=(0,r.useCallback)(async()=>{let e=(0,O.RY)(w||""),t={...n.query,page:e.page};await n.push({query:t},void 0,{shallow:!0}),N({...e,allowed_payment_types:(null==a?void 0:a.allowedPaymentMethods.join(","))||""})},[N,w,n,a]),E=(0,r.useMemo)(()=>({selectedFilterChoices:s,setSelectedFilterChoices:o,selectedChoiceKeys:p,selectSingleChoice:h,toggleSingleChoice:m,toggleChoice:f,removeSectionChoices:u,refiner:_,setRefiner:g,menuItems:x,setMenuItems:v,fetchMenuItems:R,fetchNextPage:S,nextPage:w,setNextPage:y,searchId:b,setSearchId:j,getMenuItemsData:Z,getMenuItemsError:k,isLoading:P,refinersToBeUpdated:d,setRefinersToBeUpdated:c}),[s,o,p,h,m,f,u,_,g,x,v,R,S,w,y,b,j,Z,k,P,d,c]);return(0,l.jsx)(Y.Provider,{value:E,children:t})},J=()=>{let e=(0,r.useContext)(Y);if(!e)throw Error("usePasPromoContext must be used within PasPromoProvider");return e};var Q=a(91885),W=a(48456);let ee={mobile:{h:176,w:344},tablet:{h:360,w:752},desktop:{h:420,w:1420}};var et=e=>{let{urls:t}=e,{isDesktop:a,isTablet:i}=(0,L.Z)(),[n,s,o]=(0,r.useMemo)(()=>{let{w:e,h:l}=ee.mobile,r=t.mobile;return a?(r=t.desktop,l=ee.desktop.h,e=ee.desktop.w):i&&(r=t.tablet,l=ee.tablet.h,e=ee.tablet.w),[e,l,r||W.jp]},[a,i,t]);return(0,l.jsx)("div",{className:"px-2 pt-4",children:(0,l.jsx)("div",{className:"relative w-full",children:(0,l.jsx)(Q.Z,{alt:"GoFood HEMAT",title:"GoFood HEMAT",src:o,style:{width:"100%",height:"auto"},width:n,height:s,className:"rounded-lg",priority:!0})})})},ea=a(81589),el=a(15567),er=a(86944);let ei=(0,r.forwardRef)((e,t)=>{var a,i,n;let{item:s,onClick:o,className:d,renderCustomImage:c}=e,{t:u,lang:m}=(0,R.Z)("item"),{clickstream:h,sendEvent:f}=(0,T.k)(),p=s.original_price>s.final_price,_=p?s.final_price:s.original_price,g=(0,r.useCallback)(e=>{h&&(f("item card clicked","Component",{sku:{id:s.id,price:s.original_price,name:s.name,itemCategoryName:"",promoPrice:s.final_price}}),null==o||o(e))},[h,s,o,f]);return(0,l.jsx)(el.Z,{itemUrl:(0,A.t$)("/gofood-pas/".concat(s.restaurant_info.id,"?").concat((0,er.Q)(s.deep_link)),m),ref:t,onClick:g,cardId:s.id,className:d,discount:null===(a=s.restaurant_info.consolidated_discount)||void 0===a?void 0:a.short_tagline,mediaUrl:s.image_url,renderCustomImage:c,soldNumber:s.total_orders?u("sold_number",{value:(0,b.V2)(s.total_orders,m)}):void 0,eta:u("eta_range",{min:null===(i=s.restaurant_info.delivery_details.meal_eta)||void 0===i?void 0:i.min,max:null===(n=s.restaurant_info.delivery_details.meal_eta)||void 0===n?void 0:n.max}),itemName:s.name,restaurantName:s.restaurant_info.name,price:(0,b.PF)(_),originalPrice:p?s.original_price:void 0,rating:s.average_rating?"".concat(s.average_rating," ").concat((0,b.K2)(s.total_ratings||0,!0,m)):void 0})});ei.displayName="ItemCard";var en=a(70220),es=a(79160),eo=e=>{let{items:t,banner:a,pasConfig:n}=e,{menu_items:s=[],refiners:o=[],filters:c,tracking_info:u,next_page:m=""}=t,{clickstream:f,getDefaultPayload:p,sendEvent:g}=(0,T.k)(),x=(0,i.useRouter)();(0,r.useEffect)(()=>{if(!f||!x.isReady)return;let e=x.query.label||"",t={...p(),searchRefiner:{refinerCodes:[],refinersCount:0},searchDetail:{id:u.search_id}};e&&(t.searchRefiner.selectedRefinerCode=e,t.searchRefiner.selectedRefinerPosition=o.findIndex(t=>{if(t.code===e)return!0;try{return new URL(t.url,"https://gofood.co.id").searchParams.get("label")===e}catch(e){return!1}})),o.length>0&&(t.searchRefiner.refinersCount=o.length,t.searchRefiner.refinerCodes=o.map(e=>e.code)),g("PAS Home Page Loaded","Page",t)},[f,x.isReady]);let[v,w]=(0,r.useState)(c),Z=(0,r.useMemo)(()=>{let{filter_options:e=[],quick_filter:t=[],full_list:a}=v||{};return{fullList:(0,O.C)((null==a?void 0:a.filters)||[],e),quick:(0,O.uD)(t,e)}},[v]),[U,D]=(0,r.useState)(()=>(0,O.MC)(o)),{lang:V,t:B}=(0,R.Z)("pas-promo"),{showToaster:H}=(0,F.Ps)(),{selectedFilterChoices:K,setSelectedFilterChoices:X,menuItems:z,setMenuItems:G,setNextPage:Y,setSearchId:$,refiner:Q,setRefiner:W,fetchMenuItems:ee,fetchNextPage:el,getMenuItemsData:er,getMenuItemsError:eo,isLoading:ed,refinersToBeUpdated:ec,setRefinersToBeUpdated:eu,selectedChoiceKeys:em,selectSingleChoice:eh,toggleSingleChoice:ef,toggleChoice:ep,removeSectionChoices:e_}=J(),{isGopay:eg,isTiktok:ex}=(0,_.Z)(),[ev,ew]=(0,r.useState)(!(eg||ex)),{user:ey}=(0,h.aC)();(0,r.useEffect)(()=>{!ev&&ey&&ee()},[ey]),(0,r.useEffect)(()=>{v&&x.query.url_part&&X(x.query.url_part.split(",").map(e=>{let t={section_key:""},a=v.filter_options.find(a=>{let l=a.choices.find(t=>decodeURIComponent(e)===t.url_part);return l&&(t={...t,label:l.label,choice_key:l.choice_key,url_part:l.url_part}),!!l});return a&&(t.section_key=a.section_key),t}))},[v,x.query.url_part,X]);let[eb,ej]=(0,r.useState)(!0),[eC,eN]=(0,r.useState)(!1),[ek,eZ]=(0,r.useState)(!1),[eP,eR,eS]=(0,S.Z)(M.Ni);(0,r.useEffect)(()=>{eP&&setTimeout(()=>{let e=document.getElementById("item-card-".concat(eP));e&&(e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),eS())},1500)},[eS,eP]),(0,E.Z)(()=>{G(s||[]),0===(s||[]).length&&eZ(!0),Y(m||""),$((null==u?void 0:u.search_id)||""),m||eN(!0)}),(0,r.useEffect)(()=>{eo&&((0,y.Z)(eo,{identifier:"LOAD_MORE_ITEMS"}),H({content:B("common:failed_load_more")}),eN(!0))},[eo,H,B]),(0,r.useEffect)(()=>{er&&er.data&&(0!==z.length||er.data.menu_items&&0!==er.data.menu_items.length||eZ(!0),Y(er.data.next_page||""),G([...z,...er.data.menu_items||[]]),!ev&&ey&&er.data.filters&&(w(er.data.filters),ew(!0)),ec&&(D((0,O.MC)(er.data.refiners||[])),eu(!1)),er.data.next_page?eN(!1):eN(!0))},[er]),(0,r.useEffect)(()=>{eb||(G([]),eZ(!1),ee())},[K,Q]);let eE=(0,r.useCallback)(()=>{P()(async()=>{ed||(eN(!0),el())},500)()},[el,ed]),{loadMoreArea:eI}=(0,q.F)({handleLoadMore:eE,itemsLength:z.length,maxItemsPerScreen:6});(0,d.Z)(()=>{ej(!1)},500);let{isMobile:eM}=(0,L.Z)();return(0,l.jsxs)("div",{className:"overflow-hidden",children:[(0,l.jsx)(et,{urls:a.urls}),(0,l.jsxs)("div",{className:"mx-auto w-[calc(100%_-_16px)] max-w-wrapper py-2 md:w-[calc(100%_-_64px)] lg:pb-16",children:[(0,l.jsx)("div",{className:"md:flex mx-2 -mt-7 md:justify-center",children:(0,l.jsx)(I.r,{href:(0,A.t$)("/gofood-pas/search",V),children:(0,l.jsx)(k.Z,{placeholder:B("search_placeholder"),type:"text",leftIcon:(0,l.jsx)(C.Z,{className:"w-6"}),rightIcon:(0,l.jsx)(j.Z,{className:"w-6 text-gf-background-fill-brand"}),isFullWidth:eM,inputClassname:"h-[42px] md:h-12 cursor-pointer bg-white",className:"md:max-w-none md:w-[480px] lg:w-[640px] cursor-pointer"})})}),(0,l.jsx)("h2",{className:"gf-label-m md:gf-heading-l lg:gf-heading-2xl mx-2 md:mx-0 mt-4 md:mt-10 mb-3 md:mb-6 lg:mb-10",children:B("page_title",{number:(0,b.K2)((null==n?void 0:n.menu_item.max_all_inclusive_price)||5e6,!0,V)})}),v&&(0,l.jsx)(ea.Z,{filters:v,fullListFilters:Z.fullList,quickFilters:Z.quick,className:"mb-4",selectedChoiceKeys:em,selectSingleChoice:eh,toggleSingleChoice:ef,toggleChoice:ep,removeSectionChoices:e_,selectedFilterChoices:K,setSelectedFilterChoices:X,setRefinersToBeUpdated:eu}),U.length>0&&(0,l.jsx)(es.Z,{refiners:U,setRefiner:W,activeIndex:U.findIndex(e=>e.label===x.query.label)}),(0,l.jsx)(en.Z,{isLoading:eb||ed,loaderCountMultiplier:2,loaderClassName:"lg:min-w-0 lg:min-h-0",children:z.length>0&&z.map(e=>(0,l.jsx)(ei,{item:e,onClick:()=>eR(e.id),className:"min-w-[148px] min-h-[237px] md:min-w-[220px] md:min-h-[312px] !w-auto !h-auto"},e.id))}),!eb&&!ed&&ek&&(0,l.jsxs)("div",{className:"flex flex-col w-full items-center mb-16",children:[(0,l.jsx)(N.Z,{className:"w-[360px] my-3"}),(0,l.jsx)("h3",{className:"gf-label-l md:gf-heading-xl mb-2",children:B("no_data_title")}),(0,l.jsx)("div",{className:"gf-body-m md:gf-body-l",children:B("no_data_description")})]}),!eC&&0!==z.length&&(0,l.jsx)("div",{ref:eI})]})]})},ed=a(84448),ec=!0,eu=e=>{let{err:t,paymentMethods:a}=e,b=(0,f.jD)(),j=(0,i.useRouter)(),{isGopay:C}=(0,_.Z)(),{isAuth:N,hasRecentlyLoggedOut:k}=(0,h.aC)(),{generateToken:Z}=(0,g.M)(),{getAuthCode:P}=(0,p.u)(),{login:R}=(0,p.m)(),[S,E]=(0,n.Z)(u.X),[I,M]=(0,s.Z)(m.Ty,!1),T=(0,r.useCallback)(async()=>{let e=await P();if(!(null==e?void 0:e.auth_code))throw new w.o(503,"Failed to get auth code");let{data:t}=await R({code:e.auth_code});if(!t.extVerifToken||!t.transactionId)throw new w.o(401,"Failed to get extVerifToken and/ or transactionId");await Z(t.extVerifToken,t.transactionId),E(!0),await j.push("")},[P,R,Z,E,j]);return(0,o.Z)(async()=>{t&&b.saveToTemp()}),(0,d.Z)(async()=>{if(C&&!N&&!k&&!I)try{await (0,v.w)(T,c.wf,c.e)}catch(e){(0,y.Z)(e,{identifier:"pasPromoLogin"})}finally{M(!0),await j.push("")}},1e3,[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(x.Z,{navbarSetting:{showLocationPickerNavbar:!0,isPasPage:!0},children:(0,l.jsx)($,{paymentMethodsConfig:a,children:t?(0,l.jsx)(ed.Z,{...e}):(0,l.jsx)(eo,{...e})})})})}}},function(e){e.O(0,[6763,3152,2888,9774,179],function(){return e(e.s=91467)}),_N_E=e.O()}]);